<div class="flex flex-col space-y-4 max-w-md mx-auto p-6 bg-white/5 rounded-lg">
  <input
    type="text"
    id="apiKeyInput"
    class="p-2 border rounded bg-white/10 text-white"
    placeholder="Ingresa tu clave API de ElevenLabs"
  />
  <div class="flex space-x-2">
    <button
      id="saveButton"
      class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
    >
      Guardar
    </button>
    <button
      id="clearButton"
      class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
    >
      Borrar
    </button>
  </div>
  <div id="status" class="text-center"></div>
</div>

<script>
  declare global {
    interface Window {
      getElevenLabsApiKey: () => string | null;
    }
  }

  const apiKeyInput = document.getElementById('apiKeyInput') as HTMLInputElement;
  const saveButton = document.getElementById('saveButton');
  const clearButton = document.getElementById('clearButton');
  const statusElement = document.getElementById('status');

  if (apiKeyInput && saveButton && clearButton && statusElement) {
    apiKeyInput.placeholder = 'Ingresa tu clave API de ElevenLabs';

    saveButton.addEventListener('click', () => {
      const apiKey = apiKeyInput.value.trim();
      
      if (apiKey.length < 32) {
        statusElement.innerHTML = '<span class="text-red-500">La clave parece inválida. Demasiado corta.</span>';
        return;
      }

      localStorage.setItem('elevenLabsApiKey', apiKey);
      statusElement.innerHTML = '<span class="text-green-500">✓ Clave guardada correctamente!</span>';
    });

    clearButton.addEventListener('click', () => {
      localStorage.removeItem('elevenLabsApiKey');
      apiKeyInput.value = '';
      statusElement.innerHTML = '<span class="text-yellow-500">Clave API eliminada</span>';
    });
  }

  window.getElevenLabsApiKey = () => {
    return localStorage.getItem('elevenLabsApiKey');
  };
</script>
